<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>顺丰控股 [002352.SZ]</title>
    <script src="https://unpkg.com/lightweight-charts@4.1.0/dist/lightweight-charts.standalone.production.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #131722;
            color: #d1d4dc;
        }
        .container {
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        .header {
            padding: 12px 20px;
            background: #1e222d;
            border-bottom: 1px solid #2a2e39;
            display: flex;
            align-items: center;
            gap: 20px;
        }
        .header h1 {
            font-size: 16px;
            font-weight: 500;
            color: #d1d4dc;
        }
        .legend {
            display: flex;
            gap: 15px;
            font-size: 12px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .legend-color {
            width: 12px;
            height: 3px;
            border-radius: 1px;
        }
        #chart-container {
            flex: 1;
            width: 100%;
        }
        .ohlc-panel {
            position: absolute;
            top: 50px;
            left: 10px;
            padding: 8px 12px;
            background: rgba(30, 34, 45, 0.85);
            border-radius: 4px;
            font-size: 12px;
            z-index: 1000;
            pointer-events: none;
            display: flex;
            gap: 15px;
            align-items: center;
        }
        .ohlc-item {
            display: flex;
            gap: 4px;
        }
        .ohlc-label {
            color: #787b86;
        }
        .ohlc-value {
            font-weight: 500;
        }
        .ohlc-value.up {
            color: #26a69a;
        }
        .ohlc-value.down {
            color: #ef5350;
        }
        .ohlc-date {
            color: #d1d4dc;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>顺丰控股 [002352.SZ]</h1>
            <div class="legend" id="legend"></div>
        </div>
        <div id="chart-container">
            <div class="ohlc-panel" id="ohlc-panel"></div>
        </div></div>

    <script>
        // 数据
        const candlestickData = [{"time": 1704153600, "value": 39.2}, {"time": 1704240000, "value": 38.79}, {"time": 1704672000, "value": 38.3}, {"time": 1704758400, "value": 38.96}, {"time": 1704844800, "value": 39.04}, {"time": 1704931200, "value": 39.45}, {"time": 1705017600, "value": 38.85}, {"time": 1705363200, "value": 39.3}, {"time": 1705449600, "value": 38.7}, {"time": 1705622400, "value": 38.35}, {"time": 1705881600, "value": 37.66}, {"time": 1706054400, "value": 37.73}, {"time": 1706140800, "value": 38.42}, {"time": 1706227200, "value": 37.86}, {"time": 1706486400, "value": 36.85}, {"time": 1706745600, "value": 34.71}, {"time": 1706832000, "value": 34.08}, {"time": 1707091200, "value": 34.38}, {"time": 1707177600, "value": 36.25}, {"time": 1707264000, "value": 36.84}, {"time": 1707350400, "value": 37.55}, {"time": 1708300800, "value": 37.84}, {"time": 1708387200, "value": 38.27}, {"time": 1708646400, "value": 39.35}, {"time": 1708905600, "value": 39.18}, {"time": 1708992000, "value": 38.81}, {"time": 1709078400, "value": 38.0}, {"time": 1709164800, "value": 38.35}, {"time": 1709251200, "value": 38.05}, {"time": 1709510400, "value": 37.89}, {"time": 1709769600, "value": 37.21}, {"time": 1709856000, "value": 37.34}, {"time": 1710115200, "value": 38.07}, {"time": 1710201600, "value": 39.21}, {"time": 1710374400, "value": 38.69}, {"time": 1710460800, "value": 38.97}, {"time": 1710892800, "value": 39.23}, {"time": 1710979200, "value": 38.77}, {"time": 1711065600, "value": 38.04}, {"time": 1711324800, "value": 37.77}, {"time": 1711411200, "value": 37.94}, {"time": 1712016000, "value": 35.76}, {"time": 1712102400, "value": 35.34}, {"time": 1712534400, "value": 34.84}, {"time": 1712620800, "value": 34.86}, {"time": 1712707200, "value": 34.43}, {"time": 1712880000, "value": 34.29}, {"time": 1713312000, "value": 34.85}, {"time": 1713398400, "value": 34.9}, {"time": 1713484800, "value": 34.4}, {"time": 1713916800, "value": 35.09}, {"time": 1714003200, "value": 36.09}, {"time": 1714089600, "value": 36.34}, {"time": 1714348800, "value": 36.42}, {"time": 1714435200, "value": 36.25}, {"time": 1715040000, "value": 37.31}, {"time": 1715126400, "value": 36.87}, {"time": 1715212800, "value": 37.65}, {"time": 1715299200, "value": 37.74}, {"time": 1715558400, "value": 37.3}, {"time": 1715731200, "value": 36.66}, {"time": 1715817600, "value": 36.38}, {"time": 1715904000, "value": 37.96}, {"time": 1716163200, "value": 38.29}, {"time": 1716422400, "value": 38.52}, {"time": 1716768000, "value": 38.0}, {"time": 1716940800, "value": 37.55}, {"time": 1717113600, "value": 36.85}, {"time": 1717372800, "value": 37.25}, {"time": 1717459200, "value": 37.62}, {"time": 1717718400, "value": 37.86}, {"time": 1718150400, "value": 37.3}, {"time": 1718236800, "value": 36.5}, {"time": 1718323200, "value": 36.69}, {"time": 1718668800, "value": 36.13}, {"time": 1718755200, "value": 36.38}, {"time": 1718841600, "value": 36.09}, {"time": 1718928000, "value": 35.9}, {"time": 1719273600, "value": 35.52}, {"time": 1719360000, "value": 35.75}, {"time": 1719446400, "value": 35.22}, {"time": 1719532800, "value": 35.69}, {"time": 1719878400, "value": 34.9}, {"time": 1719964800, "value": 34.42}, {"time": 1720051200, "value": 34.42}, {"time": 1720396800, "value": 34.42}, {"time": 1720483200, "value": 34.65}, {"time": 1720569600, "value": 34.85}, {"time": 1720656000, "value": 35.1}, {"time": 1720742400, "value": 35.04}, {"time": 1721001600, "value": 34.7}, {"time": 1721088000, "value": 34.72}, {"time": 1721174400, "value": 35.61}, {"time": 1721260800, "value": 35.97}, {"time": 1721692800, "value": 35.65}, {"time": 1721779200, "value": 35.27}, {"time": 1721865600, "value": 35.27}, {"time": 1721952000, "value": 34.96}, {"time": 1722211200, "value": 34.25}, {"time": 1722297600, "value": 33.77}, {"time": 1722988800, "value": 34.65}, {"time": 1723161600, "value": 34.91}, {"time": 1723420800, "value": 34.52}, {"time": 1723507200, "value": 34.1}, {"time": 1723593600, "value": 33.75}, {"time": 1723680000, "value": 34.37}, {"time": 1723766400, "value": 34.63}, {"time": 1724025600, "value": 34.34}, {"time": 1724112000, "value": 34.2}, {"time": 1724198400, "value": 34.28}, {"time": 1724284800, "value": 34.07}, {"time": 1724371200, "value": 34.57}, {"time": 1724630400, "value": 34.5}, {"time": 1724716800, "value": 33.99}, {"time": 1724803200, "value": 33.23}, {"time": 1724889600, "value": 35.64}, {"time": 1725235200, "value": 36.25}, {"time": 1725321600, "value": 37.21}, {"time": 1725408000, "value": 37.0}, {"time": 1725580800, "value": 36.33}, {"time": 1725840000, "value": 36.15}, {"time": 1725926400, "value": 36.23}, {"time": 1726012800, "value": 36.47}, {"time": 1726099200, "value": 36.29}, {"time": 1726617600, "value": 36.59}, {"time": 1726704000, "value": 36.92}, {"time": 1726790400, "value": 37.56}, {"time": 1727049600, "value": 37.56}, {"time": 1727136000, "value": 38.25}, {"time": 1727308800, "value": 40.56}, {"time": 1727395200, "value": 42.68}, {"time": 1727654400, "value": 44.98}, {"time": 1728345600, "value": 44.65}, {"time": 1728604800, "value": 41.73}, {"time": 1728950400, "value": 42.48}, {"time": 1729036800, "value": 42.36}, {"time": 1729209600, "value": 42.52}, {"time": 1729468800, "value": 42.3}, {"time": 1729555200, "value": 43.39}, {"time": 1729641600, "value": 43.3}, {"time": 1729728000, "value": 43.15}, {"time": 1729814400, "value": 43.4}, {"time": 1730160000, "value": 43.05}, {"time": 1730246400, "value": 44.21}, {"time": 1730332800, "value": 44.66}, {"time": 1730419200, "value": 45.33}, {"time": 1730764800, "value": 46.09}, {"time": 1730851200, "value": 45.65}, {"time": 1730937600, "value": 44.74}, {"time": 1731024000, "value": 44.92}, {"time": 1731283200, "value": 44.39}, {"time": 1731369600, "value": 44.65}, {"time": 1731456000, "value": 45.04}, {"time": 1731542400, "value": 44.0}, {"time": 1731628800, "value": 42.92}, {"time": 1731888000, "value": 42.32}, {"time": 1731974400, "value": 42.32}, {"time": 1732060800, "value": 42.03}, {"time": 1732233600, "value": 41.16}, {"time": 1732492800, "value": 42.0}, {"time": 1732579200, "value": 42.07}, {"time": 1732752000, "value": 41.05}, {"time": 1732838400, "value": 41.22}, {"time": 1733184000, "value": 41.09}, {"time": 1733270400, "value": 40.51}, {"time": 1733356800, "value": 40.22}, {"time": 1733443200, "value": 40.58}, {"time": 1733702400, "value": 40.83}, {"time": 1733788800, "value": 41.34}, {"time": 1734048000, "value": 41.54}, {"time": 1734307200, "value": 40.2}, {"time": 1734393600, "value": 40.39}, {"time": 1734912000, "value": 40.65}, {"time": 1734998400, "value": 41.2}, {"time": 1735084800, "value": 40.7}, {"time": 1735257600, "value": 40.65}, {"time": 1735516800, "value": 40.87}, {"time": 1735603200, "value": 40.3}, {"time": 1735776000, "value": 39.08}, {"time": 1735862400, "value": 39.45}, {"time": 1736121600, "value": 39.71}, {"time": 1736208000, "value": 40.24}, {"time": 1736294400, "value": 39.88}, {"time": 1736380800, "value": 39.8}, {"time": 1736467200, "value": 39.19}, {"time": 1736726400, "value": 39.39}, {"time": 1736812800, "value": 40.5}, {"time": 1736899200, "value": 40.6}, {"time": 1736985600, "value": 39.41}, {"time": 1737072000, "value": 39.71}, {"time": 1737331200, "value": 39.52}, {"time": 1737417600, "value": 39.06}, {"time": 1737504000, "value": 38.96}, {"time": 1737590400, "value": 38.65}, {"time": 1737676800, "value": 38.53}, {"time": 1738713600, "value": 39.31}, {"time": 1738800000, "value": 40.15}, {"time": 1739232000, "value": 40.42}, {"time": 1739404800, "value": 40.31}, {"time": 1739750400, "value": 40.33}, {"time": 1739836800, "value": 40.4}, {"time": 1739923200, "value": 41.25}, {"time": 1740355200, "value": 41.54}, {"time": 1740441600, "value": 40.89}, {"time": 1740528000, "value": 40.74}, {"time": 1740614400, "value": 41.65}, {"time": 1740700800, "value": 41.72}, {"time": 1740960000, "value": 42.12}, {"time": 1741046400, "value": 41.82}, {"time": 1741132800, "value": 42.2}, {"time": 1741219200, "value": 42.37}, {"time": 1741305600, "value": 42.14}, {"time": 1741651200, "value": 42.33}, {"time": 1741737600, "value": 43.04}, {"time": 1741824000, "value": 43.65}, {"time": 1741910400, "value": 44.1}, {"time": 1742169600, "value": 43.66}, {"time": 1742256000, "value": 43.5}, {"time": 1742342400, "value": 43.5}, {"time": 1742515200, "value": 42.73}, {"time": 1742774400, "value": 42.52}, {"time": 1742860800, "value": 42.3}, {"time": 1743033600, "value": 42.33}, {"time": 1743120000, "value": 42.04}, {"time": 1743379200, "value": 43.12}, {"time": 1743552000, "value": 43.32}, {"time": 1743638400, "value": 43.42}, {"time": 1744156800, "value": 40.86}, {"time": 1744329600, "value": 41.88}, {"time": 1744675200, "value": 42.23}, {"time": 1744761600, "value": 42.27}, {"time": 1744848000, "value": 42.36}, {"time": 1745193600, "value": 42.84}, {"time": 1745798400, "value": 43.22}, {"time": 1745884800, "value": 43.36}, {"time": 1746748800, "value": 43.67}, {"time": 1747180800, "value": 43.99}, {"time": 1747267200, "value": 43.78}, {"time": 1747353600, "value": 43.15}, {"time": 1747612800, "value": 43.0}, {"time": 1747699200, "value": 45.85}, {"time": 1747872000, "value": 46.25}, {"time": 1747958400, "value": 45.63}, {"time": 1748217600, "value": 45.62}, {"time": 1748304000, "value": 45.37}, {"time": 1748563200, "value": 46.15}, {"time": 1748908800, "value": 47.92}, {"time": 1748995200, "value": 47.25}, {"time": 1749081600, "value": 47.38}, {"time": 1749168000, "value": 46.9}, {"time": 1749427200, "value": 46.78}, {"time": 1749513600, "value": 46.44}, {"time": 1749600000, "value": 46.9}, {"time": 1749686400, "value": 48.78}, {"time": 1749772800, "value": 48.99}, {"time": 1750032000, "value": 49.8}, {"time": 1750204800, "value": 50.15}, {"time": 1750291200, "value": 49.16}, {"time": 1750809600, "value": 50.29}, {"time": 1751241600, "value": 48.76}, {"time": 1751328000, "value": 49.2}, {"time": 1751414400, "value": 48.27}, {"time": 1751846400, "value": 47.76}, {"time": 1751932800, "value": 47.73}, {"time": 1752019200, "value": 47.67}, {"time": 1752105600, "value": 48.15}, {"time": 1752192000, "value": 47.35}, {"time": 1752451200, "value": 47.48}, {"time": 1752537600, "value": 46.96}, {"time": 1752624000, "value": 47.04}, {"time": 1752710400, "value": 46.36}, {"time": 1752796800, "value": 47.71}, {"time": 1753056000, "value": 47.6}, {"time": 1753142400, "value": 47.76}, {"time": 1753228800, "value": 47.63}, {"time": 1753401600, "value": 47.95}, {"time": 1753660800, "value": 47.58}, {"time": 1753747200, "value": 47.49}, {"time": 1753833600, "value": 47.68}, {"time": 1753920000, "value": 46.0}, {"time": 1754265600, "value": 46.44}, {"time": 1754438400, "value": 46.42}, {"time": 1754524800, "value": 47.12}, {"time": 1754611200, "value": 47.58}, {"time": 1754870400, "value": 47.1}, {"time": 1754956800, "value": 46.88}, {"time": 1755043200, "value": 46.8}, {"time": 1755129600, "value": 46.7}, {"time": 1755475200, "value": 46.78}, {"time": 1755648000, "value": 48.0}, {"time": 1755820800, "value": 47.92}, {"time": 1756080000, "value": 48.34}, {"time": 1756166400, "value": 48.96}, {"time": 1756252800, "value": 47.91}, {"time": 1756339200, "value": 48.4}, {"time": 1756425600, "value": 44.57}, {"time": 1756684800, "value": 42.8}, {"time": 1756857600, "value": 42.03}, {"time": 1756944000, "value": 41.72}, {"time": 1757030400, "value": 42.02}, {"time": 1757376000, "value": 42.08}, {"time": 1757462400, "value": 42.08}, {"time": 1757548800, "value": 41.94}, {"time": 1757635200, "value": 41.72}, {"time": 1757894400, "value": 41.66}, {"time": 1757980800, "value": 41.19}, {"time": 1758067200, "value": 41.07}, {"time": 1758153600, "value": 40.53}, {"time": 1758240000, "value": 41.08}, {"time": 1758499200, "value": 40.32}, {"time": 1758585600, "value": 40.06}, {"time": 1758758400, "value": 40.08}, {"time": 1758844800, "value": 40.07}, {"time": 1759104000, "value": 39.99}, {"time": 1759968000, "value": 40.45}, {"time": 1760054400, "value": 41.17}, {"time": 1760313600, "value": 41.0}, {"time": 1760572800, "value": 40.85}, {"time": 1761091200, "value": 40.18}, {"time": 1761264000, "value": 39.88}, {"time": 1761609600, "value": 40.46}, {"time": 1761696000, "value": 40.75}, {"time": 1761782400, "value": 40.93}, {"time": 1761868800, "value": 40.33}, {"time": 1762128000, "value": 40.01}, {"time": 1762214400, "value": 39.85}, {"time": 1762300800, "value": 39.63}, {"time": 1762387200, "value": 40.03}, {"time": 1762473600, "value": 39.98}, {"time": 1762732800, "value": 40.8}, {"time": 1762819200, "value": 40.51}, {"time": 1763078400, "value": 40.29}, {"time": 1763337600, "value": 39.76}, {"time": 1763510400, "value": 39.68}, {"time": 1763596800, "value": 39.63}, {"time": 1763683200, "value": 39.11}, {"time": 1763942400, "value": 39.41}, {"time": 1764028800, "value": 39.25}, {"time": 1764115200, "value": 39.25}, {"time": 1764201600, "value": 38.79}, {"time": 1764288000, "value": 38.37}, {"time": 1764633600, "value": 37.91}, {"time": 1764720000, "value": 38.0}, {"time": 1764806400, "value": 37.86}, {"time": 1764892800, "value": 38.22}, {"time": 1765152000, "value": 38.08}, {"time": 1765238400, "value": 37.51}, {"time": 1765497600, "value": 37.43}, {"time": 1765843200, "value": 37.63}, {"time": 1765929600, "value": 37.93}, {"time": 1766016000, "value": 38.19}, {"time": 1766361600, "value": 38.31}, {"time": 1766448000, "value": 38.27}, {"time": 1766534400, "value": 38.19}, {"time": 1766620800, "value": 38.28}, {"time": 1766707200, "value": 38.49}, {"time": 1766966400, "value": 38.63}];
        const indicators = [{"name": "EMA20", "data": [{"time": 1704153600, "value": 39.2}, {"time": 1704240000, "value": 39.16095238095238}, {"time": 1704672000, "value": 39.07895691609977}, {"time": 1704758400, "value": 39.067627685995035}, {"time": 1704844800, "value": 39.06499647780503}, {"time": 1704931200, "value": 39.10166347991884}, {"time": 1705017600, "value": 39.07769552945038}, {"time": 1705363200, "value": 39.09886738378844}, {"time": 1705449600, "value": 39.06088001390382}, {"time": 1705622400, "value": 38.99317715543679}, {"time": 1705881600, "value": 38.86620790253805}, {"time": 1706054400, "value": 38.757997626105855}, {"time": 1706140800, "value": 38.72580737600054}, {"time": 1706227200, "value": 38.64334953066715}, {"time": 1706486400, "value": 38.47255433727028}, {"time": 1706745600, "value": 38.11421582895883}, {"time": 1706832000, "value": 37.73000479762941}, {"time": 1707091200, "value": 37.41095672166471}, {"time": 1707177600, "value": 37.3003894148395}, {"time": 1707264000, "value": 37.256542803902406}, {"time": 1707350400, "value": 37.284491108292656}, {"time": 1708300800, "value": 37.33739671702669}, {"time": 1708387200, "value": 37.42621607730987}, {"time": 1708646400, "value": 37.60943359375655}, {"time": 1708905600, "value": 37.759011346732116}, {"time": 1708992000, "value": 37.859105504186196}, {"time": 1709078400, "value": 37.87252402759704}, {"time": 1709164800, "value": 37.91799792973065}, {"time": 1709251200, "value": 37.9305695554706}, {"time": 1709510400, "value": 37.92670578828292}, {"time": 1709769600, "value": 37.858448094160735}, {"time": 1709856000, "value": 37.80907208519305}, {"time": 1710115200, "value": 37.833922362793714}, {"time": 1710201600, "value": 37.964977375860975}, {"time": 1710374400, "value": 38.0340271495885}, {"time": 1710460800, "value": 38.123167421056266}, {"time": 1710892800, "value": 38.22858004762233}, {"time": 1710979200, "value": 38.28014385261068}, {"time": 1711065600, "value": 38.2572730095049}, {"time": 1711324800, "value": 38.21086605621872}, {"time": 1711411200, "value": 38.18506928895979}, {"time": 1712016000, "value": 37.954110309058855}, {"time": 1712102400, "value": 37.70514742248182}, {"time": 1712534400, "value": 37.432276239388315}, {"time": 1712620800, "value": 37.18729754992276}, {"time": 1712707200, "value": 36.92469778326345}, {"time": 1712880000, "value": 36.67377418485741}, {"time": 1713312000, "value": 36.500081405347174}, {"time": 1713398400, "value": 36.34769270007602}, {"time": 1713484800, "value": 36.162198157211634}, {"time": 1713916800, "value": 36.060084047001006}, {"time": 1714003200, "value": 36.062933185381866}, {"time": 1714089600, "value": 36.08932050105978}, {"time": 1714348800, "value": 36.12081378667314}, {"time": 1714435200, "value": 36.13311723556141}, {"time": 1715040000, "value": 36.24520130836508}, {"time": 1715126400, "value": 36.30470594566365}, {"time": 1715212800, "value": 36.43282918893378}, {"time": 1715299200, "value": 36.557321647130564}, {"time": 1715558400, "value": 36.62805291883242}, {"time": 1715731200, "value": 36.63109549799123}, {"time": 1715817600, "value": 36.60718164103969}, {"time": 1715904000, "value": 36.7360214847502}, {"time": 1716163200, "value": 36.884019438583515}, {"time": 1716422400, "value": 37.03982711109937}, {"time": 1716768000, "value": 37.131272148137526}, {"time": 1716940800, "value": 37.17115099117205}, {"time": 1717113600, "value": 37.140565182489}, {"time": 1717372800, "value": 37.15098754606147}, {"time": 1717459200, "value": 37.19565539881752}, {"time": 1717718400, "value": 37.25892631321585}, {"time": 1718150400, "value": 37.262838092909575}, {"time": 1718236800, "value": 37.190186845965805}, {"time": 1718323200, "value": 37.14255000349287}, {"time": 1718668800, "value": 37.04611666982689}, {"time": 1718755200, "value": 36.982676986986235}, {"time": 1718841600, "value": 36.89766013108279}, {"time": 1718928000, "value": 36.80264488050347}, {"time": 1719273600, "value": 36.680488225217424}, {"time": 1719360000, "value": 36.59187029900624}, {"time": 1719446400, "value": 36.46121598481517}, {"time": 1719532800, "value": 36.3877668434042}, {"time": 1719878400, "value": 36.24607476307999}, {"time": 1719964800, "value": 36.0721628808819}, {"time": 1720051200, "value": 35.91481403508362}, {"time": 1720396800, "value": 35.77245079364709}, {"time": 1720483200, "value": 35.66555071806165}, {"time": 1720569600, "value": 35.5878792211034}, {"time": 1720656000, "value": 35.54141453337927}, {"time": 1720742400, "value": 35.49366076829553}, {"time": 1721001600, "value": 35.41807402845786}, {"time": 1721088000, "value": 35.35159078765235}, {"time": 1721174400, "value": 35.37620118882832}, {"time": 1721260800, "value": 35.432753456558956}, {"time": 1721692800, "value": 35.45344360355334}, {"time": 1721779200, "value": 35.43597278416731}, {"time": 1721865600, "value": 35.42016585234186}, {"time": 1721952000, "value": 35.3763405330712}, {"time": 1722211200, "value": 35.26907000611204}, {"time": 1722297600, "value": 35.126301434101364}, {"time": 1722988800, "value": 35.080939392758374}, {"time": 1723161600, "value": 35.06465945059091}, {"time": 1723420800, "value": 35.01278712196321}, {"time": 1723507200, "value": 34.92585501510957}, {"time": 1723593600, "value": 34.81386882319437}, {"time": 1723680000, "value": 34.77159560193776}, {"time": 1723766400, "value": 34.758110306515114}, {"time": 1724025600, "value": 34.7182902773232}, {"time": 1724112000, "value": 34.668929298530514}, {"time": 1724198400, "value": 34.63188841295618}, {"time": 1724284800, "value": 34.57837523076987}, {"time": 1724371200, "value": 34.577577589744166}, {"time": 1724630400, "value": 34.57018924786377}, {"time": 1724716800, "value": 34.5149331290196}, {"time": 1724803200, "value": 34.39255854530345}, {"time": 1724889600, "value": 34.51136249336979}, {"time": 1725235200, "value": 34.67694701781076}, {"time": 1725321600, "value": 34.91819015897164}, {"time": 1725408000, "value": 35.1164577628791}, {"time": 1725580800, "value": 35.23203321403347}, {"time": 1725840000, "value": 35.31945862222076}, {"time": 1725926400, "value": 35.406176848675926}, {"time": 1726012800, "value": 35.50749333927822}, {"time": 1726099200, "value": 35.58201778315649}, {"time": 1726617600, "value": 35.678016089522536}, {"time": 1726704000, "value": 35.79630027147277}, {"time": 1726790400, "value": 35.964271674189646}, {"time": 1727049600, "value": 36.1162458004573}, {"time": 1727136000, "value": 36.31946048612804}, {"time": 1727308800, "value": 36.72332139221108}, {"time": 1727395200, "value": 37.29062411676241}, {"time": 1727654400, "value": 38.022945629451705}, {"time": 1728345600, "value": 38.65409366474202}, {"time": 1728604800, "value": 38.94703712524278}, {"time": 1728950400, "value": 39.28350977998156}, {"time": 1729036800, "value": 39.576508848554745}, {"time": 1729209600, "value": 39.85684133916858}, {"time": 1729468800, "value": 40.08952311639062}, {"time": 1729555200, "value": 40.40385424816294}, {"time": 1729641600, "value": 40.6796776530998}, {"time": 1729728000, "value": 40.91494644804268}, {"time": 1729814400, "value": 41.151618214895755}, {"time": 1730160000, "value": 41.33241648014378}, {"time": 1730246400, "value": 41.60647205346342}, {"time": 1730332800, "value": 41.89728423884785}, {"time": 1730419200, "value": 42.224209549433766}, {"time": 1730764800, "value": 42.59238006853531}, {"time": 1730851200, "value": 42.883581966770045}, {"time": 1730937600, "value": 43.06038368422052}, {"time": 1731024000, "value": 43.23749000000904}, {"time": 1731283200, "value": 43.347252857151034}, {"time": 1731369600, "value": 43.47132401361284}, {"time": 1731456000, "value": 43.62072172660209}, {"time": 1731542400, "value": 43.6568434669257}, {"time": 1731628800, "value": 43.586667898647065}, {"time": 1731888000, "value": 43.46603286068068}, {"time": 1731974400, "value": 43.356886873949186}, {"time": 1732060800, "value": 43.23051669547784}, {"time": 1732233600, "value": 43.033324629241854}, {"time": 1732492800, "value": 42.93491275979025}, {"time": 1732579200, "value": 42.852540116000704}, {"time": 1732752000, "value": 42.680869628762544}, {"time": 1732838400, "value": 42.541739187928016}, {"time": 1733184000, "value": 42.40347831288725}, {"time": 1733270400, "value": 42.223147044993226}, {"time": 1733356800, "value": 42.03237113594625}, {"time": 1733443200, "value": 41.894050075379944}, {"time": 1733702400, "value": 41.79271197296281}, {"time": 1733788800, "value": 41.74959654696636}, {"time": 1734048000, "value": 41.729634971064804}, {"time": 1734307200, "value": 41.58395545001101}, {"time": 1734393600, "value": 41.47024540715282}, {"time": 1734912000, "value": 41.39212679694779}, {"time": 1734998400, "value": 41.373829006762286}, {"time": 1735084800, "value": 41.30965481564206}, {"time": 1735257600, "value": 41.24683054748568}, {"time": 1735516800, "value": 41.21094192391562}, {"time": 1735603200, "value": 41.12418555020937}, {"time": 1735776000, "value": 40.92950121209419}, {"time": 1735862400, "value": 40.78859633475189}, {"time": 1736121600, "value": 40.68587287429933}, {"time": 1736208000, "value": 40.643408791032726}, {"time": 1736294400, "value": 40.57070319188675}, {"time": 1736380800, "value": 40.49730288789754}, {"time": 1736467200, "value": 40.37279785095492}, {"time": 1736726400, "value": 40.279198055625876}, {"time": 1736812800, "value": 40.300226812232935}, {"time": 1736899200, "value": 40.32877663963932}, {"time": 1736985600, "value": 40.24127410253081}, {"time": 1737072000, "value": 40.19067656895645}, {"time": 1737331200, "value": 40.12680261000821}, {"time": 1737417600, "value": 40.025202361436}, {"time": 1737504000, "value": 39.92375451748972}, {"time": 1737590400, "value": 39.80244456344308}, {"time": 1737676800, "value": 39.68125936692469}, {"time": 1738713600, "value": 39.64590133197949}, {"time": 1738800000, "value": 39.69391072893382}, {"time": 1739232000, "value": 39.76306208808298}, {"time": 1739404800, "value": 39.81515141302746}, {"time": 1739750400, "value": 39.86418461178675}, {"time": 1739836800, "value": 39.91521464875944}, {"time": 1739923200, "value": 40.0423370631633}, {"time": 1740355200, "value": 40.18497162857632}, {"time": 1740441600, "value": 40.25211718775953}, {"time": 1740528000, "value": 40.29858221749672}, {"time": 1740614400, "value": 40.427288672973226}, {"time": 1740700800, "value": 40.55040403745197}, {"time": 1740960000, "value": 40.69988936721845}, {"time": 1741046400, "value": 40.8065665703405}, {"time": 1741132800, "value": 40.93927451602236}, {"time": 1741219200, "value": 41.075534085924986}, {"time": 1741305600, "value": 41.17691179202737}, {"time": 1741651200, "value": 41.28672971659619}, {"time": 1741737600, "value": 41.453707838825125}, {"time": 1741824000, "value": 41.66287852084178}, {"time": 1741910400, "value": 41.89498532838066}, {"time": 1742169600, "value": 42.06308196377298}, {"time": 1742256000, "value": 42.1999313005565}, {"time": 1742342400, "value": 42.32374736717017}, {"time": 1742515200, "value": 42.362438094106345}, {"time": 1742774400, "value": 42.37744398990574}, {"time": 1742860800, "value": 42.370068371819485}, {"time": 1743033600, "value": 42.3662523364081}, {"time": 1743120000, "value": 42.33518068532162}, {"time": 1743379200, "value": 42.409925381957656}, {"time": 1743552000, "value": 42.49659915510455}, {"time": 1743638400, "value": 42.58454209271364}, {"time": 1744156800, "value": 42.420299988645674}, {"time": 1744329600, "value": 42.368842846869896}, {"time": 1744675200, "value": 42.35561971859658}, {"time": 1744761600, "value": 42.34746545968262}, {"time": 1744848000, "value": 42.348659225427134}, {"time": 1745193600, "value": 42.395453584910264}, {"time": 1745798400, "value": 42.47398181491881}, {"time": 1745884800, "value": 42.55836449921225}, {"time": 1746748800, "value": 42.66423454690632}, {"time": 1747180800, "value": 42.79049792339143}, {"time": 1747267200, "value": 42.88473621640177}, {"time": 1747353600, "value": 42.909999433887315}, {"time": 1747612800, "value": 42.918570916374236}, {"time": 1747699200, "value": 43.19775463862431}, {"time": 1747872000, "value": 43.488444673041045}, {"time": 1747958400, "value": 43.69240232322761}, {"time": 1748217600, "value": 43.87598305434879}, {"time": 1748304000, "value": 44.018270382506046}, {"time": 1748563200, "value": 44.2212922508388}, {"time": 1748908800, "value": 44.57355013171129}, {"time": 1748995200, "value": 44.828450119167364}, {"time": 1749081600, "value": 45.07145486972285}, {"time": 1749168000, "value": 45.24560202498734}, {"time": 1749427200, "value": 45.39173516546474}, {"time": 1749513600, "value": 45.49156991161095}, {"time": 1749600000, "value": 45.62570611050515}, {"time": 1749686400, "value": 45.9261150523618}, {"time": 1749772800, "value": 46.217913618803536}, {"time": 1750032000, "value": 46.55906470272701}, {"time": 1750204800, "value": 46.90105854056253}, {"time": 1750291200, "value": 47.116195822413715}, {"time": 1750809600, "value": 47.41846288694574}, {"time": 1751241600, "value": 47.54622832628424}, {"time": 1751328000, "value": 47.703730390447646}, {"time": 1751414400, "value": 47.75766082945263}, {"time": 1751846400, "value": 47.7578836076}, {"time": 1751932800, "value": 47.755228025923806}, {"time": 1752019200, "value": 47.74711107107392}, {"time": 1752105600, "value": 47.785481445257346}, {"time": 1752192000, "value": 47.744007021899506}, {"time": 1752451200, "value": 47.71886349600432}, {"time": 1752537600, "value": 47.646590782099146}, {"time": 1752624000, "value": 47.588820231423036}, {"time": 1752710400, "value": 47.47178973319227}, {"time": 1752796800, "value": 47.49447642526919}, {"time": 1753056000, "value": 47.50452628952927}, {"time": 1753142400, "value": 47.52885711909791}, {"time": 1753228800, "value": 47.53848977442192}, {"time": 1753401600, "value": 47.577681224476976}, {"time": 1753660800, "value": 47.57790206024107}, {"time": 1753747200, "value": 47.56953043545621}, {"time": 1753833600, "value": 47.580051346365146}, {"time": 1753920000, "value": 47.42957026575894}, {"time": 1754265600, "value": 47.3353254785438}, {"time": 1754438400, "value": 47.24815162344439}, {"time": 1754524800, "value": 47.23594670692588}, {"time": 1754611200, "value": 47.26871368721865}, {"time": 1754870400, "value": 47.252645717007354}, {"time": 1754956800, "value": 47.21715564872094}, {"time": 1755043200, "value": 47.177426539318944}, {"time": 1755129600, "value": 47.131957345098094}, {"time": 1755475200, "value": 47.098437597945896}, {"time": 1755648000, "value": 47.18430068385581}, {"time": 1755820800, "value": 47.25436728539335}, {"time": 1756080000, "value": 47.35776087726065}, {"time": 1756166400, "value": 47.510355079426304}, {"time": 1756252800, "value": 47.54841650043332}, {"time": 1756339200, "value": 47.62951969086824}, {"time": 1756425600, "value": 47.33813686316651}, {"time": 1756684800, "value": 46.90593335238875}, {"time": 1756857600, "value": 46.44155874739935}, {"time": 1756944000, "value": 45.99188648574227}, {"time": 1757030400, "value": 45.613611582338244}, {"time": 1757376000, "value": 45.27707714592508}, {"time": 1757462400, "value": 44.97259360821793}, {"time": 1757548800, "value": 44.68377516934003}, {"time": 1757635200, "value": 44.401510867498125}, {"time": 1757894400, "value": 44.14041459440306}, {"time": 1757980800, "value": 43.859422728269436}, {"time": 1758067200, "value": 43.59376342081521}, {"time": 1758153600, "value": 43.30197642835662}, {"time": 1758240000, "value": 43.090359625655985}, {"time": 1758499200, "value": 42.82651585178398}, {"time": 1758585600, "value": 42.56303815161408}, {"time": 1758758400, "value": 42.32655832765083}, {"time": 1758844800, "value": 42.111648010731706}, {"time": 1759104000, "value": 41.90958629542392}, {"time": 1759968000, "value": 41.77057807681212}, {"time": 1760054400, "value": 41.71338016473477}, {"time": 1760313600, "value": 41.645439196664796}, {"time": 1760572800, "value": 41.56968308269672}, {"time": 1761091200, "value": 41.437332312916084}, {"time": 1761264000, "value": 41.28901494978122}, {"time": 1761609600, "value": 41.21006114504015}, {"time": 1761696000, "value": 41.16624579789347}, {"time": 1761782400, "value": 41.143746198094085}, {"time": 1761868800, "value": 41.06624656018036}, {"time": 1762128000, "value": 40.96565164968699}, {"time": 1762214400, "value": 40.85939911162156}, {"time": 1762300800, "value": 40.74231348194332}, {"time": 1762387200, "value": 40.674474102710626}, {"time": 1762473600, "value": 40.60833371197628}, {"time": 1762732800, "value": 40.626587644169014}, {"time": 1762819200, "value": 40.61548405901006}, {"time": 1763078400, "value": 40.58448557719958}, {"time": 1763337600, "value": 40.505963141275814}, {"time": 1763510400, "value": 40.42729998496383}, {"time": 1763596800, "value": 40.35136665306252}, {"time": 1763683200, "value": 40.23314125753276}, {"time": 1763942400, "value": 40.15474685205344}, {"time": 1764028800, "value": 40.06858048519121}, {"time": 1764115200, "value": 39.99062043898253}, {"time": 1764201600, "value": 39.876275635269906}, {"time": 1764288000, "value": 39.732820812863245}, {"time": 1764633600, "value": 39.55921883068579}, {"time": 1764720000, "value": 39.41072179919191}, {"time": 1764806400, "value": 39.26303400879268}, {"time": 1764892800, "value": 39.16369743652671}, {"time": 1765152000, "value": 39.0604881568575}, {"time": 1765238400, "value": 38.91282261810917}, {"time": 1765497600, "value": 38.771601416384485}, {"time": 1765843200, "value": 38.662877471966915}, {"time": 1765929600, "value": 38.59307961749388}, {"time": 1766016000, "value": 38.55469108249446}, {"time": 1766361600, "value": 38.53138716987594}, {"time": 1766448000, "value": 38.506493153697285}, {"time": 1766534400, "value": 38.47635094858325}, {"time": 1766620800, "value": 38.45765085824199}, {"time": 1766707200, "value": 38.46073172888561}, {"time": 1766966400, "value": 38.47685251661079}], "color": "#FFA500", "lineWidth": 2}];
        const strokesData = [];
        const markersData = [];
        const pricePrecision = 2; // 动态精度

        // 创建图表
        const container = document.getElementById('chart-container');
        const chart = LightweightCharts.createChart(container, {
            layout: {
                background: { type: 'solid', color: '#131722' },
                textColor: '#d1d4dc',
            },
            grid: {
                vertLines: { color: '#1e222d' },
                horzLines: { color: '#1e222d' },
            },
            crosshair: {
                mode: LightweightCharts.CrosshairMode.Normal,
                vertLine: {
                    color: '#758696',
                    width: 1,
                    style: LightweightCharts.LineStyle.Dashed,
                    labelBackgroundColor: '#2a2e39',
                },
                horzLine: {
                    color: '#758696',
                    width: 1,
                    style: LightweightCharts.LineStyle.Dashed,
                    labelBackgroundColor: '#2a2e39',
                },
            },
            rightPriceScale: {
                borderColor: '#2a2e39',
                mode: LightweightCharts.PriceScaleMode.Logarithmic,
                scaleMargins: {
                    top: 0.1,
                    bottom: 0.1,
                },
            },
            timeScale: {
                borderColor: '#2a2e39',
                timeVisible: false,
                secondsVisible: false,
                rightOffset: 5,
                tickMarkFormatter: (time) => {
                    const date = new Date(time * 1000);
                    const yy = String(date.getFullYear()).slice(-2);
                    const mm = String(date.getMonth() + 1).padStart(2, '0');
                    const dd = String(date.getDate()).padStart(2, '0');
                    return `${yy}-${mm}-${dd}`;
                },
            },
            localization: {
                timeFormatter: (time) => {
                    const date = new Date(time * 1000);
                    const yy = String(date.getFullYear()).slice(-2);
                    const mm = String(date.getMonth() + 1).padStart(2, '0');
                    const dd = String(date.getDate()).padStart(2, '0');
                    return `${yy}-${mm}-${dd}`;
                },
            },
            handleScroll: {
                vertTouchDrag: false,
            },
            handleScale: {
                mouseWheel: false,  // 禁用默认滚轮缩放，使用自定义实现
            },
        });

        // 自定义滚轮缩放：以鼠标位置为中心
        container.addEventListener('wheel', (e) => {
            e.preventDefault();
            
            const timeScale = chart.timeScale();
            const visibleRange = timeScale.getVisibleLogicalRange();
            if (!visibleRange) return;

            const containerRect = container.getBoundingClientRect();
            const mouseX = e.clientX - containerRect.left;
            const chartWidth = containerRect.width;
            
            // 鼠标在图表中的相对位置 (0-1)
            const mouseRatio = mouseX / chartWidth;
            
            // 当前可见范围
            const rangeLength = visibleRange.to - visibleRange.from;
            
            // 缩放因子：向上滚动放大，向下滚动缩小
            const zoomFactor = e.deltaY > 0 ? 1.1 : 0.9;
            const newRangeLength = rangeLength * zoomFactor;
            
            // 限制最小/最大缩放范围
            if (newRangeLength < 10 || newRangeLength > candlestickData.length) return;
            
            // 以鼠标位置为中心计算新范围
            const mouseLogicalPos = visibleRange.from + rangeLength * mouseRatio;
            const newFrom = mouseLogicalPos - newRangeLength * mouseRatio;
            const newTo = mouseLogicalPos + newRangeLength * (1 - mouseRatio);
            
            timeScale.setVisibleLogicalRange({
                from: newFrom,
                to: newTo,
            });
        }, { passive: false });

        // --------------------------------------------------------
        // Shift + 拖动: 垂直平移 (调整价格轴边距)
        // --------------------------------------------------------
        let isDragging = false;
        let lastY = 0;
        let currentTopMargin = 0.1;
        let currentBottomMargin = 0.1;
        
        container.addEventListener('mousedown', (e) => {
            if (e.shiftKey) {
                isDragging = true;
                lastY = e.clientY;
                e.preventDefault();
            }
        });
        
        document.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            
            const deltaY = e.clientY - lastY;
            lastY = e.clientY;
            
            // 调整边距来实现垂直平移效果
            const marginDelta = deltaY / container.clientHeight * 0.5;
            currentTopMargin = Math.max(0, Math.min(0.9, currentTopMargin + marginDelta));
            currentBottomMargin = Math.max(0, Math.min(0.9, currentBottomMargin - marginDelta));
            
            chart.priceScale('right').applyOptions({
                scaleMargins: {
                    top: currentTopMargin,
                    bottom: currentBottomMargin,
                },
            });
        });
        
        document.addEventListener('mouseup', () => {
            isDragging = false;
        });
        
        // 双击重置视图
        container.addEventListener('dblclick', () => {
            currentTopMargin = 0.1;
            currentBottomMargin = 0.1;
            chart.priceScale('right').applyOptions({
                scaleMargins: {
                    top: 0.1,
                    bottom: 0.1,
                },
            });
            chart.timeScale().fitContent();
        });
        // --------------------------------------------------------

        // 收盘价线系列 (原为K线蜡烛图)
        const candlestickSeries = chart.addLineSeries({
            color: '#2962FF',
            lineWidth: 2,
            crosshairMarkerVisible: true,
            lastValueVisible: true,
            priceLineVisible: true,
        });
        candlestickSeries.setData(candlestickData);

        // 设置标记 (分型点) - 当前已禁用
        // if (markersData.length > 0) {
        //     candlestickSeries.setMarkers(markersData);
        // }

        // 笔连线 (已禁用，如需启用请取消注释)
        // if (strokesData.length > 0) {
        //     const strokeSeries = chart.addLineSeries({
        //         color: '#9c27b0',
        //         lineWidth: 2,
        //         crosshairMarkerVisible: false,
        //         lastValueVisible: false,
        //         priceLineVisible: false,
        //     });
        //     strokeSeries.setData(strokesData);
        // }

        // 技术指标线
        const legendContainer = document.getElementById('legend');
        indicators.forEach((indicator, index) => {
            const lineSeries = chart.addLineSeries({
                color: indicator.color,
                lineWidth: indicator.lineWidth,
                crosshairMarkerVisible: true,
                lastValueVisible: false,
                priceLineVisible: false,
            });
            lineSeries.setData(indicator.data);

            // 添加图例
            const legendItem = document.createElement('div');
            legendItem.className = 'legend-item';
            legendItem.innerHTML = `
                <div class="legend-color" style="background: ${indicator.color}"></div>
                <span>${indicator.name}</span>
            `;
            legendContainer.appendChild(legendItem);
        });

        // 添加笔图例
        if (strokesData.length > 0) {
            const strokeLegend = document.createElement('div');
            strokeLegend.className = 'legend-item';
            strokeLegend.innerHTML = `
                <div class="legend-color" style="background: #9c27b0"></div>
                <span>笔</span>
            `;
            legendContainer.appendChild(strokeLegend);
        }

        // OHLC 面板 (左上角固定显示)
        const ohlcPanel = document.getElementById('ohlc-panel');
        
        chart.subscribeCrosshairMove((param) => {
            if (!param.time || !param.point) {
                ohlcPanel.innerHTML = '';
                return;
            }

            const data = param.seriesData.get(candlestickSeries);
            if (!data) {
                ohlcPanel.innerHTML = '';
                return;
            }

            const date = new Date(param.time * 1000);
            const dateStr = date.toISOString().split('T')[0];
            
            const change = data.close - data.open;
            const changeClass = change >= 0 ? 'up' : 'down';
            const changePercent = ((change / data.open) * 100).toFixed(2);
            const changeSign = change >= 0 ? '+' : '';
            
            // 获取指标值
            let indicatorHtml = '';
            indicators.forEach((indicator) => {
                const found = indicator.data.find(d => d.time === param.time);
                if (found) {
                    indicatorHtml += `
                        <div class="ohlc-item">
                            <span class="ohlc-label">${indicator.name}:</span>
                            <span class="ohlc-value" style="color:${indicator.color}">${found.value.toFixed(pricePrecision)}</span>
                        </div>
                    `;
                }
            });

            // 线图模式: 只显示收盘价
            const closePrice = data.value !== undefined ? data.value : data.close;
            ohlcPanel.innerHTML = `
                <span class="ohlc-date">${dateStr}</span>
                <div class="ohlc-item"><span class="ohlc-label">Close:</span><span class="ohlc-value">${closePrice.toFixed(pricePrecision)}</span></div>
                ${indicatorHtml}
            `;
        });

        // 自适应大小
        const resizeObserver = new ResizeObserver(entries => {
            for (const entry of entries) {
                chart.applyOptions({
                    width: entry.contentRect.width,
                    height: entry.contentRect.height,
                });
            }
        });
        resizeObserver.observe(container);

        // 初始显示最后 120 根 K 线
        if (candlestickData.length > 120) {
            const from = candlestickData[candlestickData.length - 120].time;
            const to = candlestickData[candlestickData.length - 1].time;
            chart.timeScale().setVisibleRange({ from, to });
        }
    </script>
</body>
</html>
